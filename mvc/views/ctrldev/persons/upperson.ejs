<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Atualizando Personagens</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <link rel="stylesheet" href="../public/css/style.css">
</head>
<style>
  /* Adicione as seguintes classes ao seu arquivo de estilo CSS */
  body {
    background-color: #424242; /* Tema escuro preto */
    color: #ffffff; /* Cor do texto branca */
  }
  nav.navbar{
    background-color: #303030!important; 
  }
   a.titulo{
    color: #ffffff;
  }
  a.nav-link{
    background-color: #0056b3;
  }

  /* Botões */
  .btn {
    background-color: #007bff; /* Cor azul */
    color: #ffffff;
    transition: background-color 0.3s ease;
  }

  .btn:hover {
    background-color: #0056b3; /* Cor azul mais escura no hover */
  }

  /* Bordas e caixas */
  .border-dark {
    border-color: #007bff; /* Cor azul para bordas */
  }

  /* Fundo de navegação */
  .bg-body-tertiary {
    background-color: #7a7a7a; /* Cor de fundo escura para a barra de navegação */
  }

  /* Animação sutil */
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  .fadeIn {
    animation: fadeIn 1s ease;
  }

  /* ... (Adapte conforme necessário) ... */

  button.cad{
    background-color: #0056b3;
    width: 600px!important;
  }
  .btn-update, .btn-delete {
    transition: transform 0.3s ease;
  }

  .btn-update:hover, .btn-delete:hover {
    transform: scale(1.1);
  }
  nav img{
    width: 50px;
    height: 50px;
  }
</style>
<body>
  <header>
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
      <div class="container-fluid"><img src="../../public/images/logocerta.png"  width="30" height="24">
        <a class="navbar-brand titulo" >     CompanyMoon</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item m-1">
              <a class="nav-link active btn  " aria-current="page" href=""><i class="bi bi-house-door"></i> Home</a>
            </li>
            <li class="nav-item m-1">
              <a class="nav-link  btn " aria-current="page" href="/cupom/lista"><i class="bi bi-cash-coin"></i> Cupons</a>
            </li>
            <li class="nav-item m-1">
              <a class="nav-link  btn " aria-current="page" href="/listdesconto"><i class="bi bi-bag-fill"></i> Descontos</a>
            </li>
            <li class="nav-item m-1">
              <a class="nav-link  btn " aria-current="page" href="/listpromo"><i class="bi bi-award-fill"></i> Promoção</a>
            </li>
            <li class="nav-item m-1">
              <a class="nav-link  btn " aria-current="page" href="/listperson"><i class="bi bi-person"></i> Personagens</a>
            </li>
            <li class="nav-item m-1"> 
              <a class="nav-link  btn " aria-current="page" href="/listskins"><i class="bi bi-gift"></i> Skins</a>
            </li>
           
            <li class="nav-item m-1 ms-5">
              <a class="nav-link  btn text-bg-danger" aria-current="page" href="#"> <i class="bi bi-x-octagon"></i> Sair</a>
            </li>
           
          </ul>
        </div>
      </div>
    </nav>

  </header>
  <main>
    <section id="cadperson">
      <h2>Atualizar Personagens</h2>
      <form id="formPerson"  >
        <div class="row m-4">
          <input type="hidden" value="<%= person.id %>" name="txtidperson" id="txtidperson" class="form-control">
          <div class="col">
            <label for="txtnomeperson" class="form-label"> Person </label>
            <input type="text" value="<%= person.nome %>" name="txtnomeperson" id="txtnomeperson" class="form-control"
              tabindex="1" autofocus>
          </div>
          <div class="col">
            <label for="txtcoinperson" class="form-label">Moedas</label>
            <input type="number" value="<%= person.coins %>" name="txtcoinperson" id="txtcoinperson"
              class="form-control" tabindex="2">
          </div>
        </div>
        <div class="row m-4">
          <div class="col">
            <label for="selgenperson" class="form-label">Gênero</label>
            <select name="selgenperson" value="<%= person.genero %>" id="selgenperson" class="form-control"
              tabindex="3">
              <option value="M">M</option>
              <option value="F">F</option>
            </select>
          </div>
          <div class="col">
            <label for="seltipoperson" class="form-label">Tipo</label>
            <select name="seltipoperson" value="<%= person.tipo %>" id="seltipoperson" class="form-control"
              tabindex="4">
              <option value="Humano">Humano</option>
              <option value="Coruja">Coruja</option>
              <option value="Mago">Mago</option>
            </select>
          </div>
          <div class="col">
            <label for="selskinperson" class="form-label">Skin</label>
            <select name="selskinperson" id="selskinperson" class="form-control" tabindex="4">
              <option value="">Selecione uma Skin</option>
              <% for(let s of skin){ %>
                <option value="<%= s.id%>"><%= s.nome %> </option>
                
                <% } %>
            </select>
        </div>
          <div class="row">
            <div class="col">
              <label for="txtlatperson" class="form-label">Latitude</label>
              <input type="text" value="<%= person.latitudeStart %>" name="txtlatperson" id="txtlatperson"
                class="form-control" value="-22.12001041675085" tabindex="5">
            </div>
            <div class="col">
              <label for="txtlongperson" class="form-label">Longitude</label>
              <input type="text" value="<%= person.longitudeStart %>" name="txtlongperson" id="txtlongperson"
                class="form-control" value="-51.40542770057783" tabindex="6">
            </div>
          </div>
        </div>
        <div class="row">
          <input type="submit" value="atualizar" name="btcadperson" id="btcadperson" class="btn btn-warning mt-4"
            tabindex="7">
        </div>
      </form>
    </section>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
    crossorigin="anonymous"></script>
  <script>
    document.getElementById("formPerson").addEventListener("submit", (form) => {
      form.preventDefault()
      atualizarPersonNoBack()
    })



    async function atualizarPersonNoBack() {


      let dadosToAtualizar = {
        nome: document.getElementById("txtnomeperson").value, 
        genero: document.getElementById("selgenperson").value, 
        tipo: document.getElementById("seltipoperson").value, 
        coins: document.getElementById("txtcoinperson").value, 
        latitudeStart: document.getElementById("txtlatperson").value, 
        longitudeStart: document.getElementById("txtlongperson").value,
        skinPerson: document.getElementById("selskinperson").value, 
        id: document.getElementById("txtidperson").value, 
      }

      
      const response = await fetch("/personAlterar", {
        method: 'PUT',
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(dadosToAtualizar)
      })

      const result = await response.json()
      const reply = await result
      
      location.href = "/listperson"

    }
  </script>
</body>

</html>